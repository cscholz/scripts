# /etc/borgbackup.conf
# Configuration for BorgBackup automation script

#################################################################################################
# MANDATORY VARIABLES (required for script operation)
#################################################################################################

# SSH connection parameters for the backup server
ssh_remote_host="10.11.22.33"
ssh_remote_port="123"
ssh_remote_folder="/borgbackup/"
ssh_remote_user="borgbackup"
ssh_remote_authfile="../../borgbackup.key"

# BorgBackup repository passphrase
borg_passphrase="STRENG_GEHEIM"                # (no default)

# Compression method for Borg
compression="zstd,3"                           # (default: zstd,3)

# Format string for the backup name (evaluated at runtime)
borg_backup_name_format='%Y-%m-%d_%H-%M'
default_backup_prefix="full"

# Allow relocated Borg repositories (default: no)
# Set to "yes" to enable access to relocated repositories.
BORG_RELOCATED_REPO_ACCESS_IS_OK="yes"

UPDATE_BASE=https://raw.githubusercontent.com/cscholz/scripts/master/Linux/bash/generic/usr/sbin/

#################################################################################################
# OPTIONAL VARIABLES (default in brackets)
#################################################################################################

# Format string for the repository name (leave empty for BorgBase compatibility)
borg_repo_name_format='$(hostname)-$(cat /etc/machine-id)'                      # (default: '')

# Exclude parameters as an array (each entry will be passed as --exclude)
exclude_args=(
  --exclude-if-present .nocache
  --exclude '*.tmp'
  --exclude /tmp
  --exclude /var/log
  --exclude /core
  --exclude /dev
  --exclude /proc
  --exclude /sys
  --exclude /var/run
  --exclude /run
  --exclude /lost+found
  --exclude /mnt
  --exclude /var/tmp/
  --exclude /var/lib/containers/storage/
)                                              # (default: empty)

# Paths to backup as an array
backup_paths=(
  /
)                                              # (default: /)

# Retention policy (prune rules)
borg_keep_within="6m"                          # (default: 6m)
borg_keep_daily=30                             # (default: 7)
borg_keep_weekly=84                            # (default: 12)
borg_keep_monthly=36                           # (default: 12)
borg_keep_yearly=10                            # (default: 3)

# Compact settings
borg_compact_threshold=5                       # (default: 10)

# Email recipient for notifications (if not set, no mails will be sent)
mail_recipient="postmater@domain.tld"         # (default: unset)

# Only backup local filesystems (true/false)
borg_local_filesystem_only=true                # (default: true)

# Mount point for mounting backups
borg_mount_point="/borgbackup_mount"       # (default: /mnt/borgbackup_mount)

# Path for log file. If not set, output goes to the console only.
#log_path="/var/log/borgbackup.log"            # (default: unset)

# Heartbeat-URLs for status notifications
heartbeat_success_url="https://status.domain.tld/api/push/123?status=up&msg=OK&ping="     # (default: unset)
heartbeat_failure_url="https://status.domain.tld/api/push/123?status=up&msg=FAILED&ping=" # (default: unset)
